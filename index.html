<!DOCTYPE html>
<html>
  <head>
    <title>Joel Brand Vis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--PureCSS-->
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css">    

    <!--Custom Styles-->
    <style>
      body{
    background-color: lightgray;
  }
  .main {
    width: 1600px;  
    background-color: white;   
    margin: auto;
    padding: 50px;
    padding-top: 35px;
    font-size:12px;
  }
  .pure-g [class*=pure-u] {
    font-family: 'Open Sans', sans-serif
  }
  .vega-bind {
    font-size:small;
    margin-left:15px;
    
  }
  .vega-bind label {
    display:inline-block;
    width:210px;
    margin-top:2px;
  }
  #visResearchImpacts .vega-bind label {
    display:initial;
    width:initial;
    margin-top:initial;
  }
  .text {
      text-align: left;
    padding-left: 2em;
  }
  .annotation {
    text-align: center;
    font-style: italic;
  }
  h1 {
    text-align:center;
  }
  .center {
    text-align: justify;
    justify-content: center; 
    margin: auto;
  }
  .highlight {
    background-color: red;
  }
  #vlBasicDevResearch {
    margin:auto;
  }
  .margin-below {
    margin-bottom: 100px;
  }
  button {
    transition-duration: 0.4s;
    border-radius:0%;
    border:none;
  }
  button:hover {
    background-color: darkgray;
    color: white;
    border:none;
  }
  .unpressed {
    background-color: initial;
    color: initial;
    border: initial;
    outline: initial;
  }
  .pressed {
    background-color: darkgray;
    color:white;
    border:none;
    outline:none;
  }
  h1 {
    font-size: 24px;
  }
  .vis-container{
    font-family: 'Open Sans';
  }
  .vega-actions a {
    margin-right: 5px;
  }
    </style>

    <!--VegaLite dependencies-->
	  <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>

    <!--Open Sans embedding-->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  </head>
  <body>
  	<div class="main">
      <div class="pure-g">
        <div class="pure-u-1-3">
          <div class="pure-g">
            <div class="pure-u-1">
              <h1 style="text-align:left;margin:0;">
                Advanced Economies of the 21st Century
              </h1>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1">
              <p style="font-size:12px;">
                Joel Brand, FIT3179 Assignment Two 2020 (Monash University)
                <br><br>
                <i>This page is designed for a wide viewport. Please zoom out until you see gray borders on both sides.</i>
              </p>
            </div>
          </div>
        </div>
        <div class="pure-u-2-3"></div>
      </div>
      <div class="pure-g center">
        
        <div class="pure-u-1">
          <h1 style="background-color: rgb(167, 250, 174);">
            Rise of the Service Economy
          </h1>
        </div>
        
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <p>
            Economist Victor R. Fuchs described in 1968 the rise of a 'service economy' spreading out from North America. Services did indeed continue to increase as a percentage of economic output throughout the world - today most 'advanced' economies are dominated by services.
          </p>
        </div>
        <div class="pure-u-1-3">
        </div>
      </div>
      <div class="pure-g">
        <div class="pure-u-5-8">
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px;">
              <p>
                <b>The Dominance of Services</b>
                <br>
                Below we see for a number of countries the % of their GDP in each major economic sector versus their economic fitness (see <a href="https://datacatalog.worldbank.org/universal-economic-fitness-metric">here</a> for detail).
                <br>
                Economic fitness is a World Bank measure of "a country's diversification and ability to produce complex good on a globally competitive scale".
                <br>
                The green lines show linear regressions, and bigger bubbles have larger GDP.
              </p>
            </div>
          </div>
          <div class="vis-container" id="visOutputComp" style="margin-left:30px;"></div>
        </div>
        <div class="pure-u-3-8">
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px">
              <p>
                <b>A Transforming China</b>
                <br>
                As we can see on the left, China is an outlier in the general trend - with a much larger
                <br>
                agricultural and industrial sector versus similarly fit economies.
                <br>
                However it is transforming rapidly to catch up with Western post-industrial economies.
              </p>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px">
              <div id="visServicesOverTime"></div>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px">
              <p>
                <b>Taking a Closer Look</b>
                <br>
                Within each sector we can see further distinctions of 'advanced' economies.
                <br>
                Click the buttons below to explore services and manufacturing in more detail.
                <br>
                Notice fit economies manufacture more machinery, and have high exports in computer services.
              </p>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="display:flex; justify-content: center;">
              <button id="manufacturingButton" onclick="showSectorBreakup('manufacturing')">Manufacturing</button>
              <button id="servicesButton" onclick="showSectorBreakup('services')">Services</button>
            </div>"
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px">
              <div id="visManufacturingBreakup"></div>
              <div id="visServicesBreakup"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1">
          <h1 style="background-color: rgb(167, 250, 174);">
            A Race for Innovation
          </h1>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <p>
            As advanced-economy service sectors surged, commentators pointed to new transformations in labour and drivers of growth. 
            Scientific and technological innovation alongside higher-skilled, networked workers were giving rise to the 'knowledge economy' and the 'information economy'. The research capacity of a population increasingly tied to its ability to compete.
            <br>
          </p>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1">
          <p style="text-align: center;">
            <i>Select a view below, and click in the map to highlight (hold shift to select multiple).</i>
          </p>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3" id="mapRotationSliders">
          <div></div> 
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g">
        <div class="pure-u-1" style="display:flex; justify-content: center; margin-bottom:15px;">
          <button id="effortButton" onclick="showResearchMap('effort')">Research Effort</button>
          <button id="fundingButton" onclick="showResearchMap('funding')">Research Funding</button>
          <button id="activityButton" onclick="showResearchMap('activity')">Research Activity</button>
          <div id="mapSliderEffort"></div>
          <div id="mapSliderFunding"></div>
          <div id="mapSliderActivity"></div>
          <p></p>
        </div>
      </div>
      <div class="pure-g" style="width:100%">
        <div class="pure-u-1" style="display: flex; justify-content: center;">
          <div id="visResearchMapActivity"></div>
          <div id="visResearchMapEffort"></div>
          <div id="visResearchMapFunding"></div>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-2-3">
          <p style="margin-top:30px;margin-left:30px;margin-bottom: 0px;">
            <b>Show Me The Money!</b>
            <br>
            Below we see economic fitness plotted against various research metrics.
            <br>
            Hover over any datapoint to highlight that country, or click to highlight the region.
            <br>
            Use the slider below to filter out countries with less researchers per capita.
            <br>
            Bigger bubbles have larger GDP.
          </p>
        </div>
        <div class="pure-u-1-3">
          <p style="margin-top:30px;margin-bottom: 0px;margin-left:115px;">
            <b>Different Focuses</b>
            <br>
            Here we can see which countries focus more on basic research 
            <br>
            versus research with a focus on commercialisation.
            <br>
            Note some interesting trends - eg. most Middle Eastern countries
            <br>
            focus on basic research, but Israel significantly bucks the trend!
          </p>
        </div>
      </div>
      <div class="pure-g" style="padding-top: 10px;">
        <div class="pure-u-1" style="display: flex; justify-content: center;">
          <div id="visResearchImpacts"></div>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1">
          <h1 style="background-color: rgb(167, 250, 174);">
            The Intellectual Property Explosion
          </h1>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <p>
            In the modern world's race for innovation, intellectual property - IP - is the trail that is left behind.
            The pivotal role of research and development in 21st century economic strength is producing an ever-growing mountain of IP
            in its wake.
            <br>
          </p>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g">
        <div class="pure-u-10-24">
          <div class="pure-g">
            <div class="pure-u-1">
              <p style="margin-left:30px;">
                <b>State of the Game</b>
                <br>
                The heatmap below depicts patent grants across differently fit economies (in ten-percentile bins).
                <br>
                The colour shows the <i>proportion</i> of a square in its column; the text gives the <i>ranking</i>.
                <br>
                Notice less fit economies are close to zero in certain categories like semiconductors; fitter economies spread more evenly, slightly favouring computers and electrical machinery.
              </p>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1">
              <div id="visIPHeatmap" style="margin-left:28px"></div>
            </div>
          </div>
        </div>
        <div class="pure-u-14-24">
          <div class="pure-g">
            <div class="pure-u-1">
              <div class="pure-u-1">
                <p style="margin-left:65px;">
                  <b>A Rapidly Changing Landscape</b>
                  <br>
                  Below we see equivalent count of patent grants originating from different regions over time.
                  <br>
                  While Asian states lagged slightly behind Europe and North America in the 1980s, the trend has strongly reversed this century.
                  <br>
                  The change is not uniform - use the menu below to explore views by different technologies.
                  <br>
                  One constant from 1980 to today: South America, the Middle East, Africa and South Asia remain very small players in IP. 
                </p>
              </div>
            </div>
          </div>
          <div id="visIPStream" style="margin-left:57px"></div>
        </div>
      </div>
    </div>
    <script>
      // get specs
      var vlOutputComparison = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/output_by_sector.vg.json";
      var vlServicesOverTime = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/transforming_china.vg.json";
      var vlResearchMapFunding = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/research_maps_funding.vg.json";
      var vlResearchMapActivity = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/research_maps_activity.vg.json";
      var vlResearchMapEffort = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/research_maps_effort.vg.json";
      var vlResearchImpacts = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/research_bubbles.vg.json";
      var vlManufacturingBreakup = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/sector_breakup_manufacturing.vg.json";
      var vlServicesBreakup = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/sector_breakup_services.vg.json";
      var vlIPStream = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/wipo_stream.vg.json";
      var vlIPHeatmap = "https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/js/wipo_heatmap.vg.json";  

      // embed specs
      var opts = {actions:false}
      vegaEmbed('#visOutputComp', vlOutputComparison, opts)
      vegaEmbed('#visServicesOverTime', vlServicesOverTime, opts)
      vegaEmbed('#visResearchMapFunding', vlResearchMapFunding, opts)
      vegaEmbed('#visResearchMapActivity', vlResearchMapActivity, opts)
      vegaEmbed('#visResearchMapEffort', vlResearchMapEffort, opts)
      vegaEmbed('#visResearchImpacts', vlResearchImpacts, opts)
      vegaEmbed('#visManufacturingBreakup', vlManufacturingBreakup, opts)
      vegaEmbed('#visServicesBreakup', vlServicesBreakup, opts)
      vegaEmbed('#visIPStream', vlIPStream, opts)
      vegaEmbed('#visIPHeatmap', vlIPHeatmap, opts)

      // function for showing / hiding sector breakup elements based on user interaction
      function showSectorBreakup(name) {
        var manufacturingBreakup = document.getElementById("visManufacturingBreakup");
        var manufacturingButton = document.getElementById("manufacturingButton");
        var servicesBreakup = document.getElementById("visServicesBreakup");
        var servicesButton = document.getElementById("servicesButton");

        manufacturingBreakup.style.display = (name == "manufacturing") ? "block" : "none";
        manufacturingButton.className = (name == "manufacturing") ? "pressed" : "unpressed";
        servicesBreakup.style.display = (name == "services") ? "block" : "none";
        servicesButton.className = (name == "services") ? "pressed" : "unpressed";
      }

      // function for showing / hiding research map elements based on user interaction
      function showResearchMap(name) {
        var effortMap = document.getElementById("visResearchMapEffort");
        var effortButton = document.getElementById("effortButton");
        var effortSliderDiv = document.getElementById("mapSliderEffort");
        var effortSlider = document.getElementsByName("RotateWorldEffort")[0];
        var fundingMap = document.getElementById("visResearchMapFunding");
        var fundingButton = document.getElementById("fundingButton");
        var fundingSliderDiv = document.getElementById("mapSliderFunding");
        var fundingSlider = document.getElementsByName("RotateWorldFunding")[0];
        var activityMap = document.getElementById("visResearchMapActivity");
        var activityButton = document.getElementById("activityButton");
        var activitySliderDiv = document.getElementById("mapSliderActivity");
        var activitySlider = document.getElementsByName("RotateWorldActivity")[0];

        if (effortMap.style.display=="block") {
          oldSlider = effortSlider;
        } else if (fundingMap.style.display=="block") {
          oldSlider = fundingSlider;
        } else if (activityMap.style.display=="block") {
          oldSlider = activitySlider;
        } else {
          oldSlider = null;
        }

        effortMap.style.display = (name=="effort") ? "block" : "none";
        effortButton.className = (name=="effort") ? "pressed" : "unpressed";
        effortSliderDiv.style.display = effortMap.style.display;

        fundingMap.style.display = (name=="funding") ? "block" : "none";
        fundingButton.className = (name=="funding") ? "pressed" : "unpressed";
        fundingSliderDiv.style.display = fundingMap.style.display;

        activityMap.style.display = (name=="activity") ? "block" : "none";
        activityButton.className = (name=="activity") ? "pressed" : "unpressed";
        activitySliderDiv.style.display = activityMap.style.display;
        
        // persist the rotation value to the currently displayed element
        if (oldSlider != null) {
          console.log(oldSlider)
          var event = new Event("change")
          if (effortSliderDiv.style.display == "block") {
            effortSlider.value = oldSlider.value;
            effortSlider.dispatchEvent(event);
          } else if (fundingSliderDiv.style.display == "block") {
            fundingSlider.value = oldSlider.value;
            fundingSlider.dispatchEvent(event);
          } else {
            activitySlider.value = oldSlider.value;
            activitySlider.dispatchEvent(event);
          }
        }

      }

      // show the desired default elements on load (where the shown element depends on user interaction)
      window.addEventListener("load", function(){
          showResearchMap("funding");
          showSectorBreakup("manufacturing");
      });
    </script>
  </body>
</html>  



<!DOCTYPE html>
<html>
  <head>
    <title>Joel Brand Vis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css">    
    <style>
      body{
        background-color: lightgray;
      }
      /*#mapRotationSliders span {
        padding-left: 15px;
        width: 80px;
        display: inline-block;
        text-align: left;
      }*/
      .main {
        width: 1600px;  
        background-color: white;   
        margin: auto;
        padding: 50px;
        padding-top: 35px;
        font-size:12px;
      }
      .pure-g [class*=pure-u] {
        font-family: 'Open Sans', sans-serif
      }
      .vega-bind {
        font-size:small;
        margin-left:15px;
        
      }
      .vega-bind label {
        display:inline-block;
        width:210px;
        margin-top:2px;
      }
      #visResearchImpacts .vega-bind label {
        display:initial;
        width:initial;
        margin-top:initial;
      }
      .text {
      	text-align: left;
        padding-left: 2em;
      }
      .annotation {
        text-align: center;
        font-style: italic;
      }
      h1 {
        text-align:center;
      }
      .center {
        text-align: justify;
        justify-content: center; 
        margin: auto;
      }
      .highlight {
        background-color: red;
      }
      #vlBasicDevResearch {
        margin:auto;
      }
      .margin-below {
        margin-bottom: 100px;
      }
      button {
        transition-duration: 0.4s;
        border-radius:0%;
        border:none;
      }
      button:hover {
        background-color: darkgray;
        color: white;
        border:none;
      }
      .unpressed {
        background-color: initial;
        color: initial;
        border: initial;
        outline: initial;
      }
      .pressed {
        background-color: darkgray;
        color:white;
        border:none;
        outline:none;
      }
      h1 {
        font-size: 24px;
      }
      .vis-container{
        font-family: 'Open Sans';
      }
    </style>
    <style media="screen">
      .vega-actions a {
        margin-right: 5px;
      }
    </style>
	  <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  </head>


  <body>
  	<div class="main">
      <div class="pure-g">
        <div class="pure-u-1-3">
          <div class="pure-g">
            <div class="pure-u-1">
              <h1 style="text-align:left;margin:0;">
                Advanced Economies of the 21st Century
              </h1>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1">
              <p style="font-size:12px;">
                Joel Brand, FIT3179 Assignment Two 2020 (Monash University)
                <br><br>
                <i>This page is designed for a wide viewport. Please zoom out until you see gray borders on both sides.</i>
              </p>
            </div>
          </div>
        </div>
        <div class="pure-u-2-3"></div>
      </div>
      <div class="pure-g center">
        
        <div class="pure-u-1">
          <h1 style="background-color: rgb(167, 250, 174);">
            Rise of the Service Economy
          </h1>
        </div>
        
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <p>
            Economist Victor R. Fuchs described in 1968 the rise of a 'service economy' spreading out from North America. Services did indeed continue to increase as a percentage of economic output throughout the world - today most 'advanced' economies are dominated by services.
          </p>
        </div>
        <div class="pure-u-1-3">
        </div>
      </div>
      <div class="pure-g">
        <div class="pure-u-5-8">
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px;">
              <p>
                <b>The Dominance of Services</b>
                <br>
                Below we see for a number of countries the % of their GDP in each major economic sector versus their economic fitness (see <a href="https://datacatalog.worldbank.org/universal-economic-fitness-metric">here</a> for detail).
                <br>
                Economic fitness is a World Bank measure of "a country's diversification and ability to produce complex good on a globally competitive scale".
                <br>
                The green lines show linear regressions, and bigger bubbles have larger GDP.
              </p>
            </div>
          </div>
          <div class="vis-container" id="visOutputComp" style="margin-left:30px;"></div>
        </div>
        <div class="pure-u-3-8">
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px">
              <p>
                <b>A Transforming China</b>
                <br>
                As we can see on the left, China is an outlier in the general trend - with a much larger
                <br>
                agricultural and industrial sector versus similarly fit economies.
                <br>
                However it is transforming rapidly to catch up with Western post-industrial economies.
              </p>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px">
              <div id="visServicesOverTime"></div>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px">
              <p>
                <b>Taking a Closer Look</b>
                <br>
                Within each sector we can see further distinctions of 'advanced' economies.
                <br>
                Click the buttons below to explore services and manufacturing in more detail.
                <br>
                Notice fit economies manufacture more machinery, and have high exports in computer services.
              </p>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="display:flex; justify-content: center;">
              <button id="manufacturingButton" onclick="showSectorBreakup('manufacturing')">Manufacturing</button>
              <button id="servicesButton" onclick="showSectorBreakup('services')">Services</button>
            </div>"
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="margin-left:30px">
              <div id="visManufacturingBreakup"></div>
              <div id="visServicesBreakup"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1">
          <h1 style="background-color: rgb(167, 250, 174);">
            A Race for Innovation
          </h1>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <p>
            As advanced-economy service sectors surged, commentators pointed to new transformations in labour and drivers of growth. 
            Scientific and technological innovation alongside higher-skilled, networked workers were giving rise to the 'knowledge economy' and the 'information economy'. The research capacity of a population increasingly tied to its ability to compete.
            <br>
          </p>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1">
          <p style="text-align: center;">
            <i>Select a view below, and click in the map to highlight (hold shift to select multiple).</i>
          </p>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3" id="mapRotationSliders">
          <div></div> 
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g">
        <div class="pure-u-1" style="display:flex; justify-content: center; margin-bottom:15px;">
          <button id="effortButton" onclick="showResearchMap('effort')">Research Effort</button>
          <button id="fundingButton" onclick="showResearchMap('funding')">Research Funding</button>
          <button id="activityButton" onclick="showResearchMap('activity')">Research Activity</button>
          <div id="mapSliderEffort"></div>
          <div id="mapSliderFunding"></div>
          <div id="mapSliderActivity"></div>
          <p></p>
        </div>
      </div>
      <div class="pure-g" style="width:100%">
        <div class="pure-u-1" style="display: flex; justify-content: center;">
          <div id="visResearchMapActivity"></div>
          <div id="visResearchMapEffort"></div>
          <div id="visResearchMapFunding"></div>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-2-3">
          <p style="margin-top:30px;margin-left:30px;margin-bottom: 0px;">
            <b>Show Me The Money!</b>
            <br>
            Below we see economic fitness plotted against various research metrics.
            <br>
            Hover over any datapoint to highlight that country, or click to highlight the region.
            <br>
            Use the slider below to filter out countries with less researchers per capita.
            <br>
            Bigger bubbles have larger GDP.
          </p>
        </div>
        <div class="pure-u-1-3">
          <p style="margin-top:30px;margin-bottom: 0px;margin-left:130px;">
            <b>Different Focuses</b>
            <br>
            Here we can see which countries focus more on basic research 
            <br>
            versus research with a focus on commercialisation.
            <br>
            Note some interesting trends - eg. most Middle Eastern countries
            <br>
            focus on basic research, but Israel significantly bucks the trend!
          </p>
        </div>
      </div>
      <div class="pure-g" style="padding-top: 10px;">
        <div class="pure-u-1" style="display: flex; justify-content: center;">
          <div id="visResearchImpacts"></div>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1">
          <h1 style="background-color: rgb(167, 250, 174);">
            The Intellectual Property Explosion
          </h1>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <p>
            In the modern world's race for innovation, intellectual property - IP - is the trail that is left behind.
            The pivotal role of research and development in 21st century economic strength is producing an ever-increasing mountain of IP
            in its wake.
            <br>
          </p>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <div id="visIPStream"></div>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
    </div>
    <script>
      // Assign the specification to a local variable vlSpec.
      var vlOutputComparison = 
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","vconcat":[{"hconcat":[{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Services != 0 && datum.Services != null&& datum[\"income-group\"] != null"},{"calculate":"datum.GDP / 1000000000","as":"GDP_billions"}],"selection":{"bubbleHover":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"Services","type":"quantitative","axis":{"grid":false,"title":"Services"},"scale":{"domain":[0,100]}},"size":{"field":"GDP_billions","type":"quantitative","legend":null,"scale":{"range":[10,1000]}},"opacity":{"condition":{"selection":"bubbleHover","value":0.7},"value":0.15},"tooltip":[{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","format":".2f"},{"field":"Services","type":"quantitative","title":"Services (% of GDP)","format":".2f"},{"field":"GDP_billions","type":"quantitative","title":"GDP (billions USD)","format":".2f"}]},"title":null,"width":400,"height":300},{"mark":{"type":"line","color":"#007E20","clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Services != 0 && datum.Services != null&& datum[\"income-group\"] != null"},{"regression":"Services","on":"economic-fitness","extent":[0,21],"as":["regress-x","regress-y"]}],"encoding":{"x":{"field":"regress-x","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"regress-y","type":"quantitative","axis":{"grid":false,"title":"Services"},"scale":{"domain":[0,100]}}},"title":null,"width":400,"height":300},{"mark":{"type":"text","align":"left","dy":-17,"dx":-15,"baseline":"left"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Code\"] == \"CHN\" && datum.Year == 2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}}],"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"Services","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}},"text":{"value":"China"}},"title":null,"width":400,"height":300}]},{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Manufacturing != 0 && datum.Manufacturing != null&& datum[\"income-group\"] != null"},{"calculate":"datum.GDP / 1000000000","as":"GDP_billions"}],"selection":{"bubbleHover":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"Manufacturing","type":"quantitative","axis":{"grid":false,"title":"Manufacturing"},"scale":{"domain":[0,100]}},"size":{"field":"GDP_billions","type":"quantitative","legend":null,"scale":{"range":[10,1000]}},"opacity":{"condition":{"selection":"bubbleHover","value":0.7},"value":0.15},"tooltip":[{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","format":".2f"},{"field":"Manufacturing","type":"quantitative","title":"Manufacturing (% of GDP)","format":".2f"},{"field":"GDP_billions","type":"quantitative","title":"GDP (billions USD)","format":".2f"}]},"title":null,"width":400,"height":300},{"mark":{"type":"line","color":"#007E20","clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Manufacturing != 0 && datum.Manufacturing != null&& datum[\"income-group\"] != null"},{"regression":"Manufacturing","on":"economic-fitness","extent":[0,21],"as":["regress-x","regress-y"]}],"encoding":{"x":{"field":"regress-x","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"regress-y","type":"quantitative","axis":{"grid":false,"title":"Manufacturing"},"scale":{"domain":[0,100]}}},"title":null,"width":400,"height":300},{"mark":{"type":"text","align":"left","dy":-17,"dx":-15,"baseline":"left"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Code\"] == \"CHN\" && datum.Year == 2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}}],"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"Manufacturing","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}},"text":{"value":"China"}},"title":null,"width":400,"height":300}]}]},{"hconcat":[{"layer":[{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Industry != 0 && datum.Industry != null&& datum[\"income-group\"] != null"},{"calculate":"datum.GDP / 1000000000","as":"GDP_billions"}],"selection":{"bubbleHover":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"Industry","type":"quantitative","axis":{"grid":false,"title":"Industry"},"scale":{"domain":[0,100]}},"size":{"field":"GDP_billions","type":"quantitative","legend":null,"scale":{"range":[10,1000]}},"opacity":{"condition":{"selection":"bubbleHover","value":0.7},"value":0.15},"tooltip":[{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","format":".2f"},{"field":"Industry","type":"quantitative","title":"Industry (% of GDP)","format":".2f"},{"field":"GDP_billions","type":"quantitative","title":"GDP (billions USD)","format":".2f"}]},"title":null,"width":400,"height":300},{"mark":{"type":"line","color":"#007E20","clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Industry != 0 && datum.Industry != null&& datum[\"income-group\"] != null"},{"regression":"Industry","on":"economic-fitness","extent":[0,21],"as":["regress-x","regress-y"]}],"encoding":{"x":{"field":"regress-x","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"regress-y","type":"quantitative","axis":{"grid":false,"title":"Industry"},"scale":{"domain":[0,100]}}},"title":null,"width":400,"height":300},{"mark":{"type":"text","align":"left","dy":-17,"dx":-15,"baseline":"left"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Code\"] == \"CHN\" && datum.Year == 2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}}],"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"Industry","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}},"text":{"value":"China"}},"title":null,"width":400,"height":300}]},{"layer":[{"mark":{"type":"rect","filled":true,"color":"white","x":250,"y":40,"width":260,"height":50},"title":null},{"mark":{"type":"text","x":250,"y":28,"fontSize":12},"encoding":{"text":{"value":["Many advanced economies used to be industry-","focused, giving rise to the term 'post-industrial","economy'"]}}}],"data":{"values":[0]}}]},{"layer":[{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Agriculture != 0 && datum.Agriculture != null&& datum[\"income-group\"] != null"},{"calculate":"datum.GDP / 1000000000","as":"GDP_billions"}],"selection":{"bubbleHover":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"Agriculture","type":"quantitative","axis":{"grid":false,"title":"Agriculture"},"scale":{"domain":[0,100]}},"size":{"field":"GDP_billions","type":"quantitative","legend":null,"scale":{"range":[10,1000]}},"opacity":{"condition":{"selection":"bubbleHover","value":0.7},"value":0.15},"tooltip":[{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","format":".2f"},{"field":"Agriculture","type":"quantitative","title":"Agriculture (% of GDP)","format":".2f"},{"field":"GDP_billions","type":"quantitative","title":"GDP (billions USD)","format":".2f"}]},"title":null,"width":400,"height":300},{"mark":{"type":"line","color":"#007E20","clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Agriculture != 0 && datum.Agriculture != null&& datum[\"income-group\"] != null"},{"regression":"Agriculture","on":"economic-fitness","extent":[0,21],"as":["regress-x","regress-y"]}],"encoding":{"x":{"field":"regress-x","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"regress-y","type":"quantitative","axis":{"grid":false,"title":"Agriculture"},"scale":{"domain":[0,100]}}},"title":null,"width":400,"height":300},{"mark":{"type":"text","align":"left","dy":-17,"dx":-15,"baseline":"left"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Code\"] == \"CHN\" && datum.Year == 2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}}],"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"pow","exponent":0.34}},"y":{"field":"Agriculture","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}},"text":{"value":"China"}},"title":null,"width":400,"height":300}]},{"layer":[{"mark":{"type":"rect","filled":true,"color":"white","x":250,"y":40,"width":220,"height":30},"title":null},{"mark":{"type":"text","x":250,"y":33,"fontSize":12},"encoding":{"text":{"value":["Most advanced economies have very small","agricultural sectors"]}}}],"data":{"values":[0]}}]}]}],"title":null,"config":{"font":"Open Sans"}}
      var vlServicesOverTime = 
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","vconcat":[{"layer":[{"mark":{"type":"area","color":"lightgrey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==1990 || datum.Year==2000 || datum.Year==2011 || datum.Year==2018"},{"filter":"isValid(datum.Services) && datum.Services > 0"}],"encoding":{"x":{"field":"Year","type":"ordinal","axis":{"title":null,"labelAngle":0}},"y":{"field":"Services","type":"quantitative","aggregate":"average"}}},{"mark":{"type":"line","color":"#5e8aba","opacity":1,"point":{"fill":"#5e8aba"},"tooltip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Name\"] == 'China' &&(datum.Year==1990 || datum.Year==2000 || datum.Year==2011 || datum.Year==2018)"}],"encoding":{"x":{"field":"Year","type":"ordinal","axis":{"title":null,"labelAngle":0}},"y":{"field":"Services","type":"quantitative","axis":{"title":"Services (% of GDP)","grid":false}}}},{"mark":{"type":"text","color":"#5e8aba","align":"left","dy":-15,"dx":-35},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Name\"] == 'China' && datum.Year==2018"}],"encoding":{"x":{"field":"Year","type":"ordinal","axis":{"title":null,"labelAngle":0}},"y":{"field":"Services","type":"quantitative","axis":{"grid":false}},"text":{"field":"Country Name","type":"nominal"}}},{"mark":{"type":"line","color":"#007E20","opacity":1,"point":{"fill":"#007E20"},"tooltip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Name\"] == 'United Kingdom' &&(datum.Year==1990 || datum.Year==2000 || datum.Year==2011 || datum.Year==2018)"}],"encoding":{"x":{"field":"Year","type":"ordinal","axis":{"title":null,"labelAngle":0}},"y":{"field":"Services","type":"quantitative","axis":{"title":"Services (% of GDP)","grid":false}}}},{"mark":{"type":"text","color":"#007E20","align":"left","dy":-15,"dx":-35},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Name\"] == 'United Kingdom' && datum.Year==2018"}],"encoding":{"x":{"field":"Year","type":"ordinal","axis":{"title":null,"labelAngle":0}},"y":{"field":"Services","type":"quantitative","axis":{"grid":false}},"text":{"field":"Country Name","type":"nominal"}}}],"width":499,"height":253}],"title":null,"config":{"font":"Open Sans"}}
      var vlResearchMapFunding =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"vconcat":[{"layer":[{"mark":{"type":"geoshape","fill":"#e1ecfa"},"data":{"sphere":{}}},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Business enterprise %"]}},{"filter":"isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"}],"selection":{"sel196":{"type":"multi","fields":["Country"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - financed by Business enterprise %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - financed by Business enterprise %","type":"quantitative","title":"Funded by Local Business (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":300},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7,"fill":"#adadad"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Business enterprise %"]}},{"filter":"datum[\"GERD - financed by Business enterprise %\"] == 0 || datum[\"GERD - financed by Business enterprise %\"] == null"}],"encoding":{"tooltip":[{"field":"properties.NAME","type":"Nominal","title":"Country (No Data Available)"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"width":473,"height":300}],"projection":{"type":"equalEarth","rotate":[{"signal":"RotateWorldFunding"},0,0],"scale":85,"translate":[237,150]}},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - financed by Business enterprise %\"])","as":"numField"}],"selection":{"sel197":{"type":"interval","encodings":["x"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - financed by Business enterprise %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"Country","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - financed by Business enterprise %","type":"quantitative","title":"Funded by Local Business (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":100}],"title":"Funded by Local Business (% of R&D)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","fill":"#e1ecfa"},"data":{"sphere":{}}},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Government %"]}},{"filter":"isValid(datum[\"GERD - financed by Government %\"]) && datum[\"GERD - financed by Government %\"] > 0"}],"selection":{"sel196":{"type":"multi","fields":["Country"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - financed by Government %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - financed by Government %","type":"quantitative","title":"Funded by Government (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":300},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7,"fill":"#adadad"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Government %"]}},{"filter":"datum[\"GERD - financed by Government %\"] == 0 || datum[\"GERD - financed by Government %\"] == null"}],"encoding":{"tooltip":[{"field":"properties.NAME","type":"Nominal","title":"Country (No Data Available)"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"width":473,"height":300}],"projection":{"type":"equalEarth","rotate":[{"signal":"RotateWorldFunding"},0,0],"scale":85,"translate":[237,150]}},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - financed by Government %\"]) && datum[\"GERD - financed by Government %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - financed by Government %\"])","as":"numField"}],"selection":{"sel197":{"type":"interval","encodings":["x"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - financed by Government %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"Country","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - financed by Government %","type":"quantitative","title":"Funded by Government (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":100}],"title":"Funded by Government (% of R&D)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","fill":"#e1ecfa"},"data":{"sphere":{}}},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Rest of the world (abroad) %"]}},{"filter":"isValid(datum[\"GERD - financed by Rest of the world (abroad) %\"]) && datum[\"GERD - financed by Rest of the world (abroad) %\"] > 0"}],"selection":{"sel196":{"type":"multi","fields":["Country"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - financed by Rest of the world (abroad) %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - financed by Rest of the world (abroad) %","type":"quantitative","title":"Funded by Foreign Interests (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":300},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7,"fill":"#adadad"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Rest of the world (abroad) %"]}},{"filter":"datum[\"GERD - financed by Rest of the world (abroad) %\"] == 0 || datum[\"GERD - financed by Rest of the world (abroad) %\"] == null"}],"encoding":{"tooltip":[{"field":"properties.NAME","type":"Nominal","title":"Country (No Data Available)"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"width":473,"height":300}],"projection":{"type":"equalEarth","rotate":[{"signal":"RotateWorldFunding"},0,0],"scale":85,"translate":[237,150]}},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - financed by Rest of the world (abroad) %\"]) && datum[\"GERD - financed by Rest of the world (abroad) %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - financed by Rest of the world (abroad) %\"])","as":"numField"}],"selection":{"sel197":{"type":"interval","encodings":["x"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - financed by Rest of the world (abroad) %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"Country","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - financed by Rest of the world (abroad) %","type":"quantitative","title":"Funded by Foreign Interests (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel196"},{"selection":"sel197"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":100}],"title":"Funded by Foreign Interests (% of R&D)"}],"params":[{"name":"RotateWorldFunding","value":0,"bind":{"input":"range","min":-180,"max":180,"step":1,"name":"Rotation","element":"#mapSliderFunding"}}],"config":{"font":"Open Sans"}}
      var vlResearchMapActivity =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"vconcat":[{"layer":[{"mark":{"type":"geoshape","fill":"#e1ecfa"},"data":{"sphere":{}}},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Basic research %"]}},{"filter":"isValid(datum[\"GERD - Basic research %\"]) && datum[\"GERD - Basic research %\"] > 0"}],"selection":{"sel194":{"type":"multi","fields":["Country"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - Basic research %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - Basic research %","type":"quantitative","title":"Basic Research (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":300},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7,"fill":"#adadad"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Basic research %"]}},{"filter":"datum[\"GERD - Basic research %\"] == 0 || datum[\"GERD - Basic research %\"] == null"}],"encoding":{"tooltip":[{"field":"properties.NAME","type":"Nominal","title":"Country (No Data Available)"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"width":473,"height":300}],"projection":{"type":"equalEarth","rotate":[{"signal":"RotateWorldActivity"},0,0],"scale":85,"translate":[237,150]}},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - Basic research %\"]) && datum[\"GERD - Basic research %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - Basic research %\"])","as":"numField"}],"selection":{"sel195":{"type":"interval","encodings":["x"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - Basic research %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"Country","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - Basic research %","type":"quantitative","title":"Basic Research (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":100}],"title":"Basic Research (% of R&D)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","fill":"#e1ecfa"},"data":{"sphere":{}}},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Applied research %"]}},{"filter":"isValid(datum[\"GERD - Applied research %\"]) && datum[\"GERD - Applied research %\"] > 0"}],"selection":{"sel194":{"type":"multi","fields":["Country"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - Applied research %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - Applied research %","type":"quantitative","title":"Applied Research (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":300},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7,"fill":"#adadad"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Applied research %"]}},{"filter":"datum[\"GERD - Applied research %\"] == 0 || datum[\"GERD - Applied research %\"] == null"}],"encoding":{"tooltip":[{"field":"properties.NAME","type":"Nominal","title":"Country (No Data Available)"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"width":473,"height":300}],"projection":{"type":"equalEarth","rotate":[{"signal":"RotateWorldActivity"},0,0],"scale":85,"translate":[237,150]}},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - Applied research %\"]) && datum[\"GERD - Applied research %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - Applied research %\"])","as":"numField"}],"selection":{"sel195":{"type":"interval","encodings":["x"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - Applied research %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"Country","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - Applied research %","type":"quantitative","title":"Applied Research (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":100}],"title":"Applied Research (% of R&D)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","fill":"#e1ecfa"},"data":{"sphere":{}}},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Experimental development %"]}},{"filter":"isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"}],"selection":{"sel194":{"type":"multi","fields":["Country"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - Experimental development %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - Experimental development %","type":"quantitative","title":"Experimental Development (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":300},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7,"fill":"#adadad"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Experimental development %"]}},{"filter":"datum[\"GERD - Experimental development %\"] == 0 || datum[\"GERD - Experimental development %\"] == null"}],"encoding":{"tooltip":[{"field":"properties.NAME","type":"Nominal","title":"Country (No Data Available)"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"width":473,"height":300}],"projection":{"type":"equalEarth","rotate":[{"signal":"RotateWorldActivity"},0,0],"scale":85,"translate":[237,150]}},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - Experimental development %\"])","as":"numField"}],"selection":{"sel195":{"type":"interval","encodings":["x"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD - Experimental development %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"Country","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD - Experimental development %","type":"quantitative","title":"Experimental Development (% of R&D)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel194"},{"selection":"sel195"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":100}],"title":"Experimental Development (% of R&D)"}],"params":[{"name":"RotateWorldActivity","value":0,"bind":{"input":"range","min":-180,"max":180,"step":1,"name":"Rotation","element":"#mapSliderActivity"}}],"config":{"font":"Open Sans"}}
      var vlResearchMapEffort =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"vconcat":[{"layer":[{"mark":{"type":"geoshape","fill":"#e1ecfa"},"data":{"sphere":{}}},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","Researchers per million inhabitants (FTE)"]}},{"filter":"isValid(datum[\"Researchers per million inhabitants (FTE)\"]) && datum[\"Researchers per million inhabitants (FTE)\"] > 0"}],"selection":{"sel198":{"type":"multi","fields":["Country"],"resolve":"intersect"}},"encoding":{"color":{"field":"Researchers per million inhabitants (FTE)","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"Researchers per million inhabitants (FTE)","type":"quantitative","title":"Researchers per Million Inhabitants (FTE)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel198"},{"selection":"sel199"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":300},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7,"fill":"#adadad"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","Researchers per million inhabitants (FTE)"]}},{"filter":"datum[\"Researchers per million inhabitants (FTE)\"] == 0 || datum[\"Researchers per million inhabitants (FTE)\"] == null"}],"encoding":{"tooltip":[{"field":"properties.NAME","type":"Nominal","title":"Country (No Data Available)"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel198"},{"selection":"sel199"}]},"value":0.8},"value":0.1}},"width":473,"height":300}],"projection":{"type":"equalEarth","rotate":[{"signal":"RotateWorldEffort"},0,0],"scale":85,"translate":[237,150]}},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"Researchers per million inhabitants (FTE)\"]) && datum[\"Researchers per million inhabitants (FTE)\"] > 0"},{"calculate":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"])","as":"numField"}],"selection":{"sel199":{"type":"interval","encodings":["x"],"resolve":"intersect"}},"encoding":{"color":{"field":"Researchers per million inhabitants (FTE)","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"type":"sqrt"}},"x":{"field":"Country","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"Researchers per million inhabitants (FTE)","type":"quantitative","title":"Researchers per Million Inhabitants (FTE)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel198"},{"selection":"sel199"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":100}],"title":"Researchers per Million Inhabitants (FTE)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","fill":"#e1ecfa"},"data":{"sphere":{}}},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD per capita (in current PPP$)"]}},{"filter":"isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"}],"selection":{"sel198":{"type":"multi","fields":["Country"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD per capita (in current PPP$)","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD per capita (in current PPP$)","type":"quantitative","title":"Research Expenditure per Capita (PPP$)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel198"},{"selection":"sel199"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":300},{"mark":{"type":"geoshape","stroke":"grey","strokeOpacity":0.7,"fill":"#adadad"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD per capita (in current PPP$)"]}},{"filter":"datum[\"GERD per capita (in current PPP$)\"] == 0 || datum[\"GERD per capita (in current PPP$)\"] == null"}],"encoding":{"tooltip":[{"field":"properties.NAME","type":"Nominal","title":"Country (No Data Available)"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel198"},{"selection":"sel199"}]},"value":0.8},"value":0.1}},"width":473,"height":300}],"projection":{"type":"equalEarth","rotate":[{"signal":"RotateWorldEffort"},0,0],"scale":85,"translate":[237,150]}},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"},{"calculate":"toNumber(datum[\"GERD per capita (in current PPP$)\"])","as":"numField"}],"selection":{"sel199":{"type":"interval","encodings":["x"],"resolve":"intersect"}},"encoding":{"color":{"field":"GERD per capita (in current PPP$)","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"type":"sqrt"}},"x":{"field":"Country","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"Nominal"},{"field":"GERD per capita (in current PPP$)","type":"quantitative","title":"Research Expenditure per Capita (PPP$)","format":".2f"}],"opacity":{"condition":{"test":{"and":[{"selection":"sel198"},{"selection":"sel199"}]},"value":0.8},"value":0.1}},"title":null,"width":473,"height":100}],"title":"Research Expenditure per Capita (PPP$)"}],"params":[{"name":"RotateWorldEffort","value":0,"bind":{"input":"range","min":-180,"max":180,"step":1,"name":"Rotation","element":"#mapSliderEffort"}}],"config":{"font":"Open Sans"}}
      var vlResearchImpacts = 
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"hconcat":[{"layer":[{"mark":{"type":"point","filled":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend","on":"click","clear":"dblclick"},"selectRegionClick":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - Experimental development %","Researchers per million inhabitants (FTE)"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount"}],"encoding":{"opacity":{"condition":{"selection":{"or":["selectRegionClick","selectRegion"]},"value":0.7},"value":0.15},"x":{"field":"GERD - Experimental development %","type":"quantitative","title":"Experimental Development (% of R&D)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"domain":[0,21],"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"domain":[0,100000000000000],"range":[0,1000],"type":"pow","exponent":0.5}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD - Experimental development %","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"},{"regression":"economic-fitness","extent":[0,90],"on":"GERD - Experimental development %","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":330,"height":350},{"layer":[{"mark":{"type":"point","filled":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend","on":"click","clear":"dblclick"},"selectRegionClick":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - financed by Business enterprise %","Researchers per million inhabitants (FTE)"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount"}],"encoding":{"opacity":{"condition":{"selection":{"or":["selectRegionClick","selectRegion"]},"value":0.7},"value":0.15},"x":{"field":"GERD - financed by Business enterprise %","type":"quantitative","title":"R&D Funded by Business (% of R&D)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"domain":[0,21],"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"domain":[0,100000000000000],"range":[0,1000],"type":"pow","exponent":0.5}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD - financed by Business enterprise %","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"},{"regression":"economic-fitness","extent":[0,90],"on":"GERD - financed by Business enterprise %","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":330,"height":350},{"layer":[{"mark":{"type":"point","filled":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend","on":"click","clear":"dblclick"},"selectRegionClick":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD per capita (in current PPP$)","Researchers per million inhabitants (FTE)"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount"}],"encoding":{"opacity":{"condition":{"selection":{"or":["selectRegionClick","selectRegion"]},"value":0.7},"value":0.15},"x":{"field":"GERD per capita (in current PPP$)","type":"quantitative","title":"R&D Funding per Capita (PPP$)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"domain":[0,21],"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"domain":[0,100000000000000],"range":[0,1000],"type":"pow","exponent":0.5}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD per capita (in current PPP$)","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"},{"regression":"economic-fitness","extent":[0,2400],"on":"GERD per capita (in current PPP$)","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":330,"height":350}]},{"mark":{"type":"point","filled":true,"tooltip":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend","on":"click","clear":"dblclick"},"selectRegionClick":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"width":352,"height":350,"title":null,"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/research-stats-updated.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - Experimental development %","GERD - Basic research %","Researchers per million inhabitants (FTE)"]}},{"filter":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount &&isValid(datum[\"GERD - Experimental development %\"]) &&datum[\"GERD - Experimental development %\"] != 0 &&isValid(datum[\"GERD - Basic research %\"]) &&datum[\"GERD - Basic research %\"] != 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"isValid(datum.region)"}],"encoding":{"size":{"field":"GDP","type":"quantitative","title":null,"legend":null,"scale":{"domain":[0,100000000000000],"range":[0,1000],"type":"pow","exponent":0.5}},"opacity":{"condition":{"selection":{"or":["selectRegionClick","selectRegion"]},"value":0.7},"value":0.15},"x":{"field":"GERD - Experimental development %","type":"quantitative","title":"Experimental Development (% R&D expenditure)","scale":{"domain":[0,90]}},"y":{"field":"GERD - Basic research %","type":"quantitative","title":"Basic Research (% R&D expenditure)","scale":{"domain":[0,60]}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}}}}],"spacing":53,"params":[{"name":"SelectResearcherCount","value":0,"bind":{"input":"range","min":0,"max":6000,"step":1,"name":"Minimum # Researchers per Million Inhabitants"}}],"config":{"font":"Open Sans"}}
      var vlManufacturingBreakup =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","mark":{"type":"bar","tooltip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/manufacturing-breakup.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"])"},{"calculate":"toNumber(datum[\"economic-fitness\"])","as":"numval"},{"window":[{"op":"ntile","param":5,"field":"numval","type":"quantitative","as":"quantileval"}],"frame":[null,null],"sort":[{"field":"numval","type":"quantitative"}]},{"lookup":"quantileval","from":{"data":{"values":[{"bucket":1,"bucket-label":"1-20"},{"bucket":2,"bucket-label":"21-40"},{"bucket":3,"bucket-label":"41-60"},{"bucket":4,"bucket-label":"61-80"},{"bucket":5,"bucket-label":"81-100"}]},"key":"bucket","fields":["bucket-label"]}}],"encoding":{"x":{"field":"ManufacturingVA","type":"quantitative","aggregate":"average","stack":"normalize","axis":{"title":"% of Manufacturing Value Added","labels":false,"ticks":false,"grid":false}},"y":{"field":"bucket-label","type":"ordinal","title":"Economic Fitness (Percentile)"},"opacity":{"value":0.7},"color":{"field":"ManufacturingType","type":"nominal","title":"Manufacturing Type","legend":{"orient":"top"},"scale":{"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"]}},"tooltip":[{"field":"bucket-label","title":"Economic Fitness Percentile","type":"Ordinal"},{"field":"ManufacturingType","title":"Manufacturing Type","type":"Nominal"},{"field":"ManufacturingVA","aggregate":"average","stack":"normalize","title":"Avg % of Manufacturing Value Added","type":"quantitative","format":".2f"}]},"width":480,"height":190,"config":{"font":"Open Sans"}}
      var vlServicesBreakup =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","mark":{"type":"bar","tooltip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/services-breakup.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/universal-economic-fitness-2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"])"},{"calculate":"toNumber(datum[\"economic-fitness\"])","as":"numval"},{"window":[{"op":"ntile","param":5,"field":"numval","type":"quantitative","as":"quantileval"}],"frame":[null,null],"sort":[{"field":"numval","type":"quantitative"}]},{"lookup":"quantileval","from":{"data":{"values":[{"bucket":1,"bucket-label":"1-20"},{"bucket":2,"bucket-label":"21-40"},{"bucket":3,"bucket-label":"41-60"},{"bucket":4,"bucket-label":"61-80"},{"bucket":5,"bucket-label":"81-100"}]},"key":"bucket","fields":["bucket-label"]}}],"encoding":{"x":{"field":"ServiceExports","type":"quantitative","aggregate":"average","stack":"normalize","axis":{"title":"% of Exported Commercial Services","labels":false,"ticks":false,"grid":false}},"y":{"field":"bucket-label","type":"ordinal","title":"Economic Fitness (Percentile)"},"color":{"field":"ServiceType","type":"nominal","title":"Service Type","scale":{"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"]},"legend":{"orient":"top","labelLimit":180}},"opacity":{"value":0.7},"tooltip":[{"field":"bucket-label","title":"Economic Fitness Percentile","type":"Ordinal"},{"field":"ServiceType","title":"Service Type","type":"Nominal"},{"field":"ServiceExports","aggregate":"average","title":"Avg % of Commercial Service Exports","stack":"normalize","type":"quantitative","format":".2f"}]},"width":480,"height":190,"config":{"font":"Open Sans"}}
      var vlIPStream = 
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","mark":{"type":"area","tooltip":true,"interpolate":"natural"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/WIPO-IP-stats.csv","format":{"type":"csv"}},"selection":{"sel15":{"type":"single","fields":["FieldName"],"bind":{"input":"select","options":[null,"Unknown","Electrical machinery, apparatus, energy","Audio-visual technology","Telecommunications","Digital communication","Basic communication processes","Computer technology","IT methods for management","Semiconductors","Optics","Measurement","Analysis of biological materials","Control","Medical technology","Organic fine chemistry","Biotechnology","Pharmaceuticals","Macromolecular chemistry, polymers","Food chemistry","Basic materials chemistry","Materials, metallurgy","Surface technology, coating","Micro-structural and nano-technology","Chemical engineering","Environmental technology","Handling","Machine tools","Engines, pumps, turbines","Textile and paper machines","Other special machines","Thermal processes and apparatus","Mechanical elements","Transport","Furniture, games","Other consumer goods","Civil engineering"],"labels":["All Fields","Unknown","Electrical machinery, apparatus, energy","Audio-visual technology","Telecommunications","Digital communication","Basic communication processes","Computer technology","IT methods for management","Semiconductors","Optics","Measurement","Analysis of biological materials","Control","Medical technology","Organic fine chemistry","Biotechnology","Pharmaceuticals","Macromolecular chemistry, polymers","Food chemistry","Basic materials chemistry","Materials, metallurgy","Surface technology, coating","Micro-structural and nano-technology","Chemical engineering","Environmental technology","Handling","Machine tools","Engines, pumps, turbines","Textile and paper machines","Other special machines","Thermal processes and apparatus","Mechanical elements","Transport","Furniture, games","Other consumer goods","Civil engineering"],"name":"Field"}}},"transform":[{"lookup":"Field","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179-F/main/data/ip_field_lookup.csv","format":{"type":"csv"}},"key":"FieldCode","fields":["FieldName"]}},{"filter":{"selection":"sel15"}},{"lookup":"Origin (Code)","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"alpha-2-code","fields":["region"]}},{"filter":"isValid(datum.region)"},{"calculate":"if(datum.region==\"East Asia & Pacific\"||datum.region==\"Europe & Central Asia\"||datum.region==\"North America\",datum.region,\"Other\")","as":"binned_regions"},{"aggregate":[{"op":"sum","field":"Value","as":"Total_Filed"}],"groupby":["binned_regions","Year"]}],"encoding":{"x":{"field":"Year","type":"temporal","axis":{"grid":false,"ticks":false,"labelOverlap":true,"labelSeparation":40,"labelAngle":0}},"y":{"field":"Total_Filed","type":"quantitative","stack":"center","title":"Total Patents Granted"},"color":{"field":"binned_regions","type":"nominal","title":"By Origin","legend":{"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","North America","Other"],"range":["#e41a1c","#377eb8","#ff7f00","grey"]}},"opacity":{"value":0.8}},"height":500,"width":800}
      // Embed the visualization in the container with id `vis`
      var opts = {actions:false}
      vegaEmbed('#visOutputComp', vlOutputComparison, opts)
      vegaEmbed('#visServicesOverTime', vlServicesOverTime, opts)
      vegaEmbed('#visServicesOverTime2', vlServicesOverTime, opts)
      vegaEmbed('#visResearchMapFunding', vlResearchMapFunding, opts)
      vegaEmbed('#visResearchMapActivity', vlResearchMapActivity, opts)
      vegaEmbed('#visResearchMapEffort', vlResearchMapEffort, opts)
      //vegaEmbed('#visBasicVsDev', vlBasicVsDevResearch, opts)
      //vegaEmbed('#visResearchMetricImpacts', vlResearchMetricsImpact, opts)
      vegaEmbed('#visResearchImpacts', vlResearchImpacts, opts)
      vegaEmbed('#visManufacturingBreakup', vlManufacturingBreakup, opts)
      vegaEmbed('#visServicesBreakup', vlServicesBreakup, opts)
      vegaEmbed('#visIPStream', vlIPStream, opts)

      function showSectorBreakup(name) {
        var manufacturingBreakup = document.getElementById("visManufacturingBreakup");
        var manufacturingButton = document.getElementById("manufacturingButton");
        var servicesBreakup = document.getElementById("visServicesBreakup");
        var servicesButton = document.getElementById("servicesButton");

        manufacturingBreakup.style.display = (name == "manufacturing") ? "block" : "none";
        manufacturingButton.className = (name == "manufacturing") ? "pressed" : "unpressed";
        servicesBreakup.style.display = (name == "services") ? "block" : "none";
        servicesButton.className = (name == "services") ? "pressed" : "unpressed";
      }

      function showResearchMap(name) {

        var effortMap = document.getElementById("visResearchMapEffort");
        var effortButton = document.getElementById("effortButton");
        var effortSliderDiv = document.getElementById("mapSliderEffort");
        var effortSlider = document.getElementsByName("RotateWorldEffort")[0];
        var fundingMap = document.getElementById("visResearchMapFunding");
        var fundingButton = document.getElementById("fundingButton");
        var fundingSliderDiv = document.getElementById("mapSliderFunding");
        var fundingSlider = document.getElementsByName("RotateWorldFunding")[0];
        var activityMap = document.getElementById("visResearchMapActivity");
        var activityButton = document.getElementById("activityButton");
        var activitySliderDiv = document.getElementById("mapSliderActivity");
        var activitySlider = document.getElementsByName("RotateWorldActivity")[0];

        if (effortMap.style.display=="block") {
          oldSlider = effortSlider;
        } else if (fundingMap.style.display=="block") {
          oldSlider = fundingSlider;
        } else if (activityMap.style.display=="block") {
          oldSlider = activitySlider;
        } else {
          oldSlider = null;
        }

        effortMap.style.display = (name=="effort") ? "block" : "none";
        effortButton.className = (name=="effort") ? "pressed" : "unpressed";
        effortSliderDiv.style.display = effortMap.style.display;

        fundingMap.style.display = (name=="funding") ? "block" : "none";
        fundingButton.className = (name=="funding") ? "pressed" : "unpressed";
        fundingSliderDiv.style.display = fundingMap.style.display;

        activityMap.style.display = (name=="activity") ? "block" : "none";
        activityButton.className = (name=="activity") ? "pressed" : "unpressed";
        activitySliderDiv.style.display = activityMap.style.display;
        
        if (oldSlider != null) {
          console.log(oldSlider)
          var event = new Event("change")
          if (effortSliderDiv.style.display == "block") {
            effortSlider.value = oldSlider.value;
            effortSlider.dispatchEvent(event);
          } else if (fundingSliderDiv.style.display == "block") {
            fundingSlider.value = oldSlider.value;
            fundingSlider.dispatchEvent(event);
          } else {
            activitySlider.value = oldSlider.value;
            activitySlider.dispatchEvent(event);
          }
        }

      }

      window.addEventListener("load", function(){
          showResearchMap("funding");
          showSectorBreakup("manufacturing");
      });

    </script>
  </body>
</html>  


